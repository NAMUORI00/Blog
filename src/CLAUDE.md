# src í´ë” - Notion-Hugo ë™ê¸°í™” ì—”ì§„

**ì‘ì„±ì¼**: 2025-07-24  
**ìš©ë„**: Notion CMSì™€ Hugo ì •ì  ì‚¬ì´íŠ¸ ìƒì„±ê¸° ê°„ì˜ ë™ê¸°í™”ë¥¼ ë‹´ë‹¹í•˜ëŠ” TypeScript ì½”ë“œ

## ğŸ“ í´ë” êµ¬ì¡°

```
src/
â”œâ”€â”€ index.ts          # ë©”ì¸ ì§„ì…ì  - Notionì—ì„œ ì½˜í…ì¸ ë¥¼ ê°€ì ¸ì™€ Hugoë¡œ ë™ê¸°í™”
â”œâ”€â”€ config.ts         # ì„¤ì • ë¡œë” - notion-hugo.config.ts íŒŒì¼ ì½ê¸° ë° ê²€ì¦
â”œâ”€â”€ render.ts         # í˜ì´ì§€ ë Œë”ë§ - Notion í˜ì´ì§€ë¥¼ Hugo ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ ë³€í™˜
â”œâ”€â”€ file.ts           # íŒŒì¼ ì‹œìŠ¤í…œ ì‘ì—… - ì½˜í…ì¸  íŒŒì¼ ì½ê¸°/ì“°ê¸°
â”œâ”€â”€ helpers.ts        # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ - ì œëª© ì¶”ì¶œ, íŒŒì¼ëª… ìƒì„± ë“±
â”œâ”€â”€ sh.ts             # ì‰˜ ëª…ë ¹ ì‹¤í–‰ - Hugo ëª…ë ¹ì–´ ì‹¤í–‰
â””â”€â”€ markdown/         # ë§ˆí¬ë‹¤ìš´ ë³€í™˜ ê´€ë ¨ ëª¨ë“ˆ
    â”œâ”€â”€ notion-to-md.ts  # Notion ë¸”ë¡ì„ ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ ë³€í™˜
    â”œâ”€â”€ notion.ts        # Notion API ë˜í¼
    â”œâ”€â”€ md.ts           # ë§ˆí¬ë‹¤ìš´ ì²˜ë¦¬ ìœ í‹¸ë¦¬í‹°
    â””â”€â”€ types.ts        # TypeScript íƒ€ì… ì •ì˜
```

## ğŸ”‘ ì£¼ìš” ê¸°ëŠ¥

### 1. **index.ts** - ë©”ì¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°
- Notion API í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
- ë°ì´í„°ë² ì´ìŠ¤ì™€ í˜ì´ì§€ ë™ê¸°í™”
- ë¡œì»¬ì—ë§Œ ìˆëŠ” íŒŒì¼ ì •ë¦¬
- í™˜ê²½ ë³€ìˆ˜(`NOTION_TOKEN`) í™•ì¸

### 2. **config.ts** - ì„¤ì • ê´€ë¦¬
- `notion-hugo.config.ts` íŒŒì¼ ë¡œë“œ
- ìˆ˜ë™/ìë™ ë§ˆìš´íŠ¸ ëª¨ë“œ ì§€ì›
- API URL ìƒì„± í•¨ìˆ˜ ì œê³µ
- TypeScript íƒ€ì… ì•ˆì „ì„± ë³´ì¥

### 3. **render.ts** - ì½˜í…ì¸  ë³€í™˜
- Notion í˜ì´ì§€ë¥¼ Hugo í”„ë¡ íŠ¸ë§¤í„°ê°€ ìˆëŠ” ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ ë³€í™˜
- í˜ì´ì§€ ì†ì„±ì„ í”„ë¡ íŠ¸ë§¤í„°ë¡œ ë§¤í•‘
- ì»¤ë²„ ì´ë¯¸ì§€ ì²˜ë¦¬
- ì‘ì„±ì ì •ë³´ ìë™ ì¶”ì¶œ

### 4. **file.ts** - íŒŒì¼ ì‹œìŠ¤í…œ ì‘ì—…
- ì½˜í…ì¸  íŒŒì¼ ì½ê¸°/ì“°ê¸°
- í”„ë¡ íŠ¸ë§¤í„° íŒŒì‹±
- `NOTION_METADATA` í™•ì¸ìœ¼ë¡œ ê´€ë¦¬ ëŒ€ìƒ íŒŒì¼ ì‹ë³„

### 5. **sh.ts** - ëª…ë ¹ ì‹¤í–‰
- âš ï¸ **ë³´ì•ˆ ì£¼ì˜**: `exec()` ì‚¬ìš©ìœ¼ë¡œ ëª…ë ¹ ì£¼ì… ì·¨ì•½ì  ì¡´ì¬
- Hugo ëª…ë ¹ì–´ ì‹¤í–‰ (`hugo new` ë“±)
- Promise ê¸°ë°˜ ë¹„ë™ê¸° ì²˜ë¦¬

## ğŸš¨ ë³´ì•ˆ ê¶Œì¥ì‚¬í•­

1. **ëª…ë ¹ ì£¼ì… ì·¨ì•½ì  ìˆ˜ì •** (`sh.ts`):
   ```typescript
   // í˜„ì¬ (ìœ„í—˜)
   exec(cmd, (err, stdout, stderr) => {...})
   
   // ê¶Œì¥
   execFile(command, args, (err, stdout, stderr) => {...})
   ```

2. **í™˜ê²½ ë³€ìˆ˜ ê²€ì¦ ì¶”ê°€**:
   ```typescript
   if (!process.env.NOTION_TOKEN || process.env.NOTION_TOKEN.trim() === "") {
     throw new Error("NOTION_TOKEN is required");
   }
   ```

## ğŸ’¡ ê°œì„  ì œì•ˆ

1. **ì—ëŸ¬ ì²˜ë¦¬ ê°•í™”**
   - ëª¨ë“  ë¹„ë™ê¸° ì‘ì—…ì— try-catch ì¶”ê°€
   - ì»¤ìŠ¤í…€ ì—ëŸ¬ í´ë˜ìŠ¤ ìƒì„±
   - ì—ëŸ¬ ë¡œê¹… ê°œì„ 

2. **íƒ€ì… ì•ˆì „ì„± í–¥ìƒ**
   - `any` íƒ€ì… ì œê±°
   - `@ts-ignore` ì œê±°
   - ì—„ê²©í•œ null ì²´í¬ í™œì„±í™”

3. **í…ŒìŠ¤íŠ¸ ì¶”ê°€**
   - ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
   - í†µí•© í…ŒìŠ¤íŠ¸ ì¶”ê°€
   - ëª¨í‚¹ì„ í†µí•œ API í…ŒìŠ¤íŠ¸

## ğŸ”§ ì‚¬ìš© ë°©ë²•

```bash
# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
export NOTION_TOKEN="your-notion-api-token"

# ë™ê¸°í™” ì‹¤í–‰
npm start
```

## ğŸ“ ì„¤ì • ì˜ˆì‹œ

```typescript
// notion-hugo.config.ts
export default {
  base_url: "https://blog.namuori.net",
  mount: {
    manual: false,
    page_url: 'https://notion.so/...',
    databases: [{
      database_id: '...',
      target_folder: 'posts'
    }]
  }
}
```

## âš¡ ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­

- Notion API ìš”ì²­ ìµœì í™”ë¥¼ ìœ„í•œ ë°°ì¹˜ ì²˜ë¦¬ ê³ ë ¤
- íŒŒì¼ ì‹œìŠ¤í…œ ì‘ì—… ë³‘ë ¬í™”
- ìºì‹± ì „ëµ êµ¬í˜„ ê²€í† 